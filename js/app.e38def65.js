(function(t){function e(e){for(var o,l,a=e[0],s=e[1],c=e[2],d=0,b=[];d<a.length;d++)l=a[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&b.push(r[l][0]),r[l]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);u&&u(e);while(b.length)b.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(i.splice(e--,1),t=l(l.s=n[0]))}return t}var o={},r={app:0},i=[];function l(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=o,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(n,o,function(e){return t[e]}.bind(null,o));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/abra-planner-dist/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-gray-100 min-h-screen p-4"},[n("div",{staticClass:"flex"},[t._l(t.queueColumns,(function(t){return n("v-column",{key:t.id,attrs:{column:t}})})),n("v-timeline"),t._l(t.regularColumns,(function(t){return n("v-column",{key:t.id,attrs:{column:t}})}))],2)])},i=[],l=(n("4de4"),n("5530")),a=n("2f62"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-gray-400 shadow rounded pb-2 mr-4 w-64",on:{dragover:function(e){return e.preventDefault(),t.onDragOver(e)}}},[n("div",{staticClass:"bg-white p-2 rounded-t"},[t._v(t._s(t.column.title))]),n("div",{staticClass:"relative",style:"height: "+4*t.column.height+"rem"},t._l(t.column.blocks,(function(e){return n(e.component,{key:e.id,tag:"component",attrs:{block:e,column:t.column}})})),1)])},c=[],u=n("0f32"),d=n.n(u),b=(n("d81d"),n("b85c")),f=n("d4ec"),m=n("bee2"),h=n("262e"),p=n("2caf"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"absolute left-0 right-0 bg-transparent p-2 pb-0",style:t.styles,attrs:{draggable:""},on:{dragstart:t.onDragStart,dragend:t.onDragEnd,mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave}},[n("div",{staticClass:"shadow rounded p-2 h-full cursor-move",class:t.classes,domProps:{innerHTML:t._s(t.title)}}),t.shouldShowTooltip?n("div",{staticClass:"absolute top-0 left-0 m-2 p-2 bg-white shadow rounded z-50",domProps:{innerHTML:t._s(t.fullTitle)}}):t._e(),n("div",{staticClass:"absolute top-0 right-0 m-2 p-2 cursor-pointer",attrs:{title:"Rozdělit"},on:{click:t.onSplit}},[n("svg",{staticClass:"icon icon-tabler icon-tabler-copy",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"}},[n("path",{attrs:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}}),n("rect",{attrs:{x:"8",y:"8",width:"12",height:"12",rx:"2"}}),n("path",{attrs:{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"}})])]),n("v-modal",{ref:"modal"})],1)},v=[],k=(n("ac1f"),n("1276"),n("96cf"),n("1da1")),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShown?n("v-portal",[n("div",{staticClass:"fixed z-50 inset-0 overflow-y-auto"},[n("div",{staticClass:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},[n("span",{staticClass:"hidden sm:inline-block sm:align-middle sm:h-screen"}),t._v("​ "),n("div",{staticClass:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",attrs:{role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"}},[n("div",{staticClass:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},[n("div",{staticClass:"sm:flex sm:items-start"},[n("div",{staticClass:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},[n("h3",{staticClass:"text-lg leading-6 font-medium text-gray-900",attrs:{id:"modal-headline"}},[t._v(" Rozdělit práci (původní "+t._s(t.max)+" ks) ")]),n("div",{staticClass:"mt-2"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amount,expression:"amount",modifiers:{number:!0}}],ref:"input",staticClass:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",attrs:{type:"number",placeholder:"Počet ks"},domProps:{value:t.amount},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onConfirm(e)},input:function(e){e.target.composing||(t.amount=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])])]),n("div",{staticClass:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[n("span",{staticClass:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},[n("button",{staticClass:"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-green-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-green-500 focus:outline-none focus:border-green-700 focus:shadow-outline-green transition ease-in-out duration-150 sm:text-sm sm:leading-5",attrs:{type:"button"},on:{click:t.onConfirm}},[t._v(" Rozdělit ")])]),n("span",{staticClass:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},[n("button",{staticClass:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5",attrs:{type:"button"},on:{click:t.onCancel}},[t._v(" Zrušit ")])])])])])])]):t._e()},y=[],x=(n("d3b7"),n("82f1")),O={components:{"v-portal":x["a"]},data:function(){return{isShown:!1,max:null,amount:null,resolve:null}},methods:{show:function(t){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.max,e.isShown=!0,e.max=o,n.next=5,e.$nextTick();case 5:return e.$refs.input.focus(),n.abrupt("return",new Promise((function(t){e.resolve=t})));case 7:case"end":return n.stop()}}),n)})))()},onConfirm:function(){return this.amount?this.amount<1?alert("Množství práce musí být více jak 0"):this.amount>=this.max?alert("Množství práce nesmí být více nebo rovno jak ".concat(this.max," ks")):(this.isShown=!1,void this.resolve(this.amount)):alert("Musíte vyplnit množství práce")},onCancel:function(){this.isShown=!1,this.resolve(null)}}},j=O,_=n("2877"),C=Object(_["a"])(j,w,y,!1,null,null,null),P=C.exports,S={components:{"v-modal":P},props:{block:{type:R,required:!0},column:{type:q,required:!0}},data:function(){return{isMouseOver:!1}},mounted:function(){this.initBlock({block:this.block,el:this.$el})},computed:{classes:function(){return[this.block.color,{"opacity-50 border border-blue-400":this.block.isDragging}]},styles:function(){return{height:"".concat(4*this.block.height,"rem"),top:"".concat(4*this.block.top,"rem")}},title:function(){return this.isSmall?this.shortTitle:this.fullTitle},shortTitle:function(){return this.block.title.split("<br>")[0]},fullTitle:function(){return this.block.title+"<br>".concat(this.block.amount," ks")},isSmall:function(){return this.block.height<2.2},shouldShowTooltip:function(){return this.isMouseOver&&this.isSmall}},methods:Object(l["a"])(Object(l["a"])({},Object(a["b"])(["initBlock","dragStart","dragEnd","split"])),{},{onDragStart:function(t){t.dataTransfer.setDragImage(new Image,0,0),this.dragStart({block:this.block})},onDragEnd:function(){this.dragEnd({block:this.block})},onMouseEnter:function(){this.isMouseOver=!0},onMouseLeave:function(){this.isMouseOver=!1},onSplit:function(){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.modal.show({max:t.block.amount});case 2:if(n=e.sent,null!==n){e.next=5;break}return e.abrupt("return");case 5:t.split({block:t.block,column:t.column,amount:n});case 6:case"end":return e.stop()}}),e)})))()}})},T=S,M=Object(_["a"])(T,g,v,!1,null,null,null),E=M.exports,R=function(){function t(e){var n=e.id,o=e.title,r=e.work,i=void 0===r?1:r,l=e.amount,a=void 0===l?1:l,s=e.color,c=void 0===s?"bg-white":s,u=e.blocked,d=void 0===u?[]:u;Object(f["a"])(this,t),this.id=n,this.el=null,this.title=o,this.work=i,this.amount=a,this.color=c,this.blocked=d,this.top=0,this.height=4,this.isDragging=!1}return Object(m["a"])(t,[{key:"getNextOffset",value:function(){return this.top+this.height}},{key:"component",get:function(){return E}}]),t}(),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"absolute left-0 right-0 p-2 pb-0",style:"height: "+4*t.block.height+"rem; top: "+4*t.block.top+"rem"},[n("div",{staticClass:"bg-red-500 shadow rounded p-2 h-full"},[t._v(" "+t._s(t.block.title)+" ")])])},I=[],D={extends:E},$=D,B=Object(_["a"])($,L,I,!1,null,null,null),K=B.exports,N=function(t){Object(h["a"])(n,t);var e=Object(p["a"])(n);function n(t){var o,r=t.id,i=t.title,l=t.top,a=t.height;return Object(f["a"])(this,n),o=e.call(this,{id:r,title:i}),o.top=l,o.height=a,o}return Object(m["a"])(n,[{key:"component",get:function(){return K}}]),n}(R),q=function(){function t(e){var n=e.id,o=e.title,r=e.effectivity,i=void 0===r?1:r,l=e.blocks,a=void 0===l?[]:l;Object(f["a"])(this,t),this.id=n,this.title=o,this.effectivity=i,this.blocks=a,this.height=0}return Object(m["a"])(t,[{key:"recalculate",value:function(){var t,e=this._getBannedRegions(),n=0,o=Object(b["a"])(this.blocks);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(!(r instanceof N)){r.top=n,r.height=Math.max(Math.ceil(r.work*r.amount/this.effectivity),1);while(1){var i=this._getIntersectingBannedRegion(e,r),l=i.to;if(!l)break;r.top=l}n=r.getNextOffset()}}}catch(a){o.e(a)}finally{o.f()}this.blocks.sort((function(t,e){return t.top-e.top})),this.height=n}},{key:"_getBannedRegions",value:function(){return this.blocks.filter((function(t){return t instanceof N})).map((function(t){return{from:t.top,to:t.top+t.height}}))}},{key:"_getIntersectingBannedRegion",value:function(t,e){var n,o=Object(b["a"])(t);try{for(o.s();!(n=o.n()).done;){var r=n.value,i=e.top,l=e.top+e.height;if(i===r.from)return r;if(l===r.to)return r;if(i>r.from&&i<r.to)return r;if(l>r.from&&l<r.to)return r;if(i<r.from&&l>r.to)return r}}catch(a){o.e(a)}finally{o.f()}return{}}}]),t}(),z=100,F={props:{column:{type:q,required:!0}},mounted:function(){this.initColumn({column:this.column})},methods:Object(l["a"])(Object(l["a"])({},Object(a["b"])(["initColumn","dragOver"])),{},{onDragOver:d()((function(t){this.dragOver({column:this.column,y:t.clientY})}),z)})},H=F,Y=Object(_["a"])(H,s,c,!1,null,null,null),A=Y.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white shadow rounded pb-2 mr-2"},[n("div",{staticClass:"p-2 rounded-t"},[t._v("Čas")]),t._l(t.times,(function(e,o){return n("div",{key:o,staticClass:"pt-2 px-1 text-right",staticStyle:{height:"4rem"}},[t._v(t._s(e))])}))],2)},V=[],Z={computed:{times:function(){return["6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","24:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","24:00"]}}},G=Z,U=Object(_["a"])(G,J,V,!1,null,null,null),Q=U.exports,W={components:{"v-column":A,"v-timeline":Q},computed:Object(l["a"])(Object(l["a"])({},Object(a["c"])(["columns"])),{},{queueColumns:function(){return this.columns.filter((function(t){return"queue"===t.id}))},regularColumns:function(){return this.columns.filter((function(t){return"queue"!==t.id}))}})},X=W,tt=Object(_["a"])(X,r,i,!1,null,null,null),et=tt.exports,nt=(n("99af"),n("caad"),n("a434"),n("a9e3"),n("2532"),n("ddb0"),n("2909")),ot=n("3835");o["a"].use(a["a"]);var rt=new a["a"].Store({state:function(){return{columns:[new q({id:"queue",title:"Zásobník",effectivity:Number.POSITIVE_INFINITY,blocks:[new R({id:"block1",title:"<b>KL1-4027/2020</b><br>14.9.2020<br>00363-008901-01<br>Paleta 1200x800",work:200,amount:400,color:"bg-red-300",blocked:[]}),new R({id:"block2",title:"<b>KL1-4030/2020</b><br>14.9.2020<br>00668-009935-01<br>Paleta 1200x1000",work:350,amount:250,color:"bg-red-300",blocked:["column4"]}),new R({id:"block3",title:"<b>KL1-4035/2020</b><br>15.9.2020<br>00363-008901-01<br>Paleta 1200x800",work:200,amount:400,color:"bg-orange-300",blocked:[]}),new R({id:"block4",title:"<b>KL1-4040/2020</b><br>15.9.2020<br>01386-020003-01<br>Paleta 1800x750",work:950,amount:100,color:"bg-orange-300",blocked:[]}),new R({id:"block5",title:"<b>KL1-4041/2020</b><br>16.9.2020<br>01295-002042-02<br>Paleta 1000x1000",work:670,amount:750,color:"bg-yellow-300",blocked:["column4"]}),new R({id:"block6",title:"<b>KL1-4042/2020</b><br>16.9.2020<br>00227-009324-01<br>Paleta 800x600",work:240,amount:1e3,color:"bg-yellow-300",blocked:[]}),new R({id:"block7",title:"<b>KL1-4043/2020</b><br>17.9.2020<br>02524-000001-01<br>Paleta 1200x800",work:200,amount:500,color:"bg-green-300",blocked:[]}),new R({id:"block8",title:"<b>KL1-4044/2020</b><br>17.9.2020<br>01295-000086-01<br>Paleta 1200x750",work:450,amount:200,color:"bg-green-300",blocked:[]}),new R({id:"block9",title:"<b>KL1-4045/2020</b><br>18.9.2020<br>00464-009923-01<br>Paleta 1200x800",work:420,amount:250,color:"bg-white",blocked:["column1"]}),new R({id:"block10",title:"<b>KL1-4046/2020</b><br>18.9.2020<br>00464-000118-01<br>Paleta 1200x800",work:300,amount:300,color:"bg-white",blocked:[]})]}),new q({id:"column1",title:"Automat 1",effectivity:13600,blocks:[new N({id:"fixedBlock1",title:"Pravidelná údržba",top:10,height:4})]}),new q({id:"column2",title:"Ruční tlučení 4",effectivity:13600,blocks:[]}),new q({id:"column3",title:"Ruční tlučení 5",effectivity:6800,blocks:[]}),new q({id:"column4",title:"Cape",effectivity:34e3,blocks:[new N({id:"fixedBlock1",title:"Pravidelná údržba",top:30,height:2})]}),new q({id:"column5",title:"Ruční tlučení 9",effectivity:13600,blocks:[]})],dragging:null}},mutations:{initColumn:function(t,e){var n=e.column;n.recalculate()},initBlock:function(t,e){var n=e.block,o=e.el;n.el=o},dragStart:function(t,e){var n=e.block;t.dragging=n,n.isDragging=!0},dragEnd:function(t,e){var n=e.block;t.dragging=null,n.isDragging=!1},dragOver:function(t,e){var n,o=e.column,r=e.y;if(t.dragging&&!t.dragging.blocked.includes(o.id)){var i=function(e,n){var o,r=e.blocks.map((function(t){return t.el})),i=Number.NEGATIVE_INFINITY,l=e.blocks.length,a=Object(b["a"])(r.entries());try{for(a.s();!(o=a.n()).done;){var s=Object(ot["a"])(o.value,2),c=s[0],u=s[1],d=u.getBoundingClientRect(),f=d.top,m=f+d.height/2,h=m,p=h+d.height/2;if(n>f&&n<m)return t.dragging.el,c;if(n>h&&n<p)return u===t.dragging.el?c:c+1;var g=n-d.top-d.height/2;g<0&&g>i&&(i=g,l=c)}}catch(v){a.e(v)}finally{a.f()}return l},l=function(){var e,n=Object(b["a"])(t.columns.entries());try{for(n.s();!(e=n.n()).done;){var o,r=Object(ot["a"])(e.value,2),i=r[0],l=r[1],a=Object(b["a"])(l.blocks.entries());try{for(a.s();!(o=a.n()).done;){var s=Object(ot["a"])(o.value,2),c=s[0],u=s[1];if(u===t.dragging)return{columnFrom:i,blockFrom:c}}}catch(d){a.e(d)}finally{a.f()}}}catch(d){n.e(d)}finally{n.f()}},a=function(){var e,n=Object(b["a"])(t.columns.entries());try{for(n.s();!(e=n.n()).done;){var l=Object(ot["a"])(e.value,2),a=l[0],s=l[1];if(s===o)return{columnTo:a,blockTo:i(o,r)}}}catch(c){n.e(c)}finally{n.f()}},s=l(),c=s.columnFrom,u=s.blockFrom,d=a(),f=d.columnTo,m=d.blockTo;c===f&&u<m&&m--,c===f&&u===m||((n=t.columns[f].blocks).splice.apply(n,[m,0].concat(Object(nt["a"])(t.columns[c].blocks.splice(u,1)))),t.columns[c].recalculate(),t.columns[f].recalculate())}},split:function(t,e){var n=e.column,o=e.block,r=e.amount,i=o.amount;o.amount=r,n.blocks.push(new R({id:o.id+"_copy",title:o.title,work:o.work,amount:i-r,color:o.color,blocked:o.blocked})),n.recalculate()}}});n("ba8c");o["a"].config.productionTip=!1,new o["a"]({store:rt,render:function(t){return t(et)}}).$mount("#app")},ba8c:function(t,e,n){}});
//# sourceMappingURL=app.e38def65.js.map