(function(t){function e(e){for(var o,l,c=e[0],a=e[1],u=e[2],f=0,d=[];f<c.length;f++)l=c[f],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&d.push(r[l][0]),r[l]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);s&&s(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(o=!1)}o&&(i.splice(e--,1),t=l(l.s=n[0]))}return t}var o={},r={app:0},i=[];function l(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=t,l.c=o,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(n,o,function(e){return t[e]}.bind(null,o));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/abra-planner-dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var s=a;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-gray-100 min-h-screen p-4"},[n("div",{staticClass:"flex"},[t._l(t.queueColumns,(function(t){return n("v-column",{key:t.id,attrs:{column:t}})})),n("v-timeline"),t._l(t.regularColumns,(function(t){return n("v-column",{key:t.id,attrs:{column:t}})}))],2)])},i=[],l=(n("4de4"),n("5530")),c=n("2f62"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-gray-400 shadow rounded pb-2 mr-4 w-64",on:{dragover:function(e){return e.preventDefault(),t.onDragOver(e)}}},[n("div",{staticClass:"bg-white p-2 rounded-t"},[t._v(t._s(t.column.title))]),n("div",{staticClass:"relative",style:"height: "+t.column.height+"rem"},t._l(t.column.blocks,(function(e){return n(e.component,{key:e.id,tag:"component",attrs:{block:e,column:t.column}})})),1)])},u=[],s=n("0f32"),f=n.n(s),d=(n("d81d"),n("b85c")),b=n("d4ec"),h=n("bee2"),g=n("262e"),p=n("2caf"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"absolute left-0 right-0 bg-transparent p-2 pb-0 cursor-move",style:"height: "+t.block.height+"rem; top: "+t.block.top+"rem",attrs:{draggable:""},on:{dragstart:t.onDragStart,dragend:t.onDragEnd}},[n("div",{staticClass:"shadow rounded p-2 h-full",class:t.classes},[t._v(" "+t._s(t.block.title)+" ")])])},v=[],k={props:{block:{type:_,required:!0},column:{type:T,required:!0}},mounted:function(){this.initBlock({block:this.block,el:this.$el})},computed:{classes:function(){return["bg-".concat(this.block.color),{"opacity-50 border border-blue-400":this.block.isDragging}]}},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])(["initBlock","dragStart","dragEnd"])),{},{onDragStart:function(t){t.dataTransfer.setDragImage(new Image,0,0),this.dragStart({block:this.block})},onDragEnd:function(){this.dragEnd({block:this.block})}})},y=k,w=n("2877"),O=Object(w["a"])(y,m,v,!1,null,null,null),j=O.exports,_=function(){function t(e){var n=e.id,o=e.title,r=e.work,i=void 0===r?1:r,l=e.color,c=void 0===l?"white":l,a=e.blocked,u=void 0===a?[]:a;Object(b["a"])(this,t),this.id=n,this.el=null,this.title=o,this.work=i,this.color=c,this.blocked=u,this.top=0,this.height=4,this.isDragging=!1}return Object(h["a"])(t,[{key:"getNextOffset",value:function(){return this.top+this.height}},{key:"component",get:function(){return j}}]),t}(),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"absolute left-0 right-0 p-2 pb-0",style:"height: "+t.block.height+"rem; top: "+t.block._top+"rem"},[n("div",{staticClass:"bg-red-500 shadow rounded p-2 h-full"},[t._v(" "+t._s(t.block.title)+" ")])])},C=[],P={extends:j},E=P,I=Object(w["a"])(E,x,C,!1,null,null,null),S=I.exports,D=function(t){Object(g["a"])(n,t);var e=Object(p["a"])(n);function n(t){var o,r=t.id,i=t.title,l=t.top,c=t.height;return Object(b["a"])(this,n),o=e.call(this,{id:r,title:i}),o._top=l,o.height=c,o}return Object(h["a"])(n,[{key:"getNextOffset",value:function(){return this._top+this.height}},{key:"component",get:function(){return S}}]),n}(_),T=function(){function t(e){var n=e.id,o=e.title,r=e.effectivity,i=void 0===r?1:r,l=e.blocks,c=void 0===l?[]:l;Object(b["a"])(this,t),this.id=n,this.title=o,this.effectivity=i,this.blocks=c,this.height=0}return Object(h["a"])(t,[{key:"recalculate",value:function(){var t,e=this._getBannedRegions(),n=0,o=Object(d["a"])(this.blocks);try{for(o.s();!(t=o.n()).done;){var r=t.value;if(!(r instanceof D)){r.top=n,r.height=Math.max(r.work/this.effectivity,4);while(1){var i=this._getIntersectingBannedRegion(e,r),l=i.to;if(!l)break;r.top=l}n=r.getNextOffset()}}}catch(c){o.e(c)}finally{o.f()}this.blocks.sort((function(t,e){return t.top-e.top})),this.height=n}},{key:"_getBannedRegions",value:function(){return this.blocks.filter((function(t){return t instanceof D})).map((function(t){return{from:t._top,to:t._top+t.height}}))}},{key:"_getIntersectingBannedRegion",value:function(t,e){var n,o=Object(d["a"])(t);try{for(o.s();!(n=o.n()).done;){var r=n.value,i=e.top,l=e.top+e.height;if(i===r.from)return r;if(l===r.to)return r;if(i>r.from&&i<r.to)return r;if(l>r.from&&l<r.to)return r;if(i<r.from&&l>r.to)return r}}catch(c){o.e(c)}finally{o.f()}return{}}}]),t}(),B=100,K={props:{column:{type:T,required:!0}},mounted:function(){this.initColumn({column:this.column})},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])(["initColumn","dragOver"])),{},{onDragOver:f()((function(t){this.dragOver({column:this.column,y:t.clientY})}),B)})},N=K,q=Object(w["a"])(N,a,u,!1,null,null,null),$=q.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white shadow rounded pb-2 mr-2"},[n("div",{staticClass:"p-2 rounded-t"},[t._v("Čas")]),t._l(t.times,(function(e){return n("div",{key:e,staticClass:"pt-2 px-1 text-right",staticStyle:{height:"4rem"}},[t._v(t._s(e))])}))],2)},M=[],R={computed:{times:function(){return["6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00"]}}},Y=R,J=Object(w["a"])(Y,F,M,!1,null,null,null),V=J.exports,A={components:{"v-column":$,"v-timeline":V},computed:Object(l["a"])(Object(l["a"])({},Object(c["c"])(["columns"])),{},{queueColumns:function(){return this.columns.filter((function(t){return"queue"===t.id}))},regularColumns:function(){return this.columns.filter((function(t){return"queue"!==t.id}))}})},G=A,Z=Object(w["a"])(G,r,i,!1,null,null,null),z=Z.exports,H=(n("99af"),n("caad"),n("a434"),n("a9e3"),n("d3b7"),n("2532"),n("ddb0"),n("2909")),L=n("3835");o["a"].use(c["a"]);var Q=new c["a"].Store({state:function(){return{columns:[new T({id:"queue",title:"Zásobník",effectivity:Number.POSITIVE_INFINITY,blocks:[new _({id:"block1",title:"Kompletační list 1",work:16,color:"red-300",blocked:["column1"]}),new _({id:"block2",title:"Kompletační list 2",work:32,color:"red-300"}),new _({id:"block3",title:"Kompletační list 3",work:4,color:"orange-300",blocked:["column1","column2","column3"]}),new _({id:"block4",title:"Kompletační list 4",work:8,color:"orange-300"}),new _({id:"block5",title:"Kompletační list 5",work:16,color:"orange-300"}),new _({id:"block6",title:"Kompletační list 6",work:16,color:"yellow-300"}),new _({id:"block7",title:"Kompletační list 7",work:32,color:"yellow-300"}),new _({id:"block8",title:"Kompletační list 8",work:4,color:"green-300"}),new _({id:"block9",title:"Kompletační list 9",work:8,color:"green-300",blocked:["column3"]}),new _({id:"block10",title:"Kompletační list 10",work:16,color:"green-300",blocked:["column5"]})]}),new T({id:"column1",title:"Pracoviště 1",effectivity:2,blocks:[]}),new T({id:"column2",title:"Pracoviště 2",effectivity:1,blocks:[new D({id:"fixedBlock1",title:"Pravidelná oprava",top:8,height:16})]}),new T({id:"column3",title:"Pracoviště 3",effectivity:.5,blocks:[]}),new T({id:"column4",title:"Pracoviště 4",effectivity:3,blocks:[new D({id:"fixedBlock1",title:"Pravidelná oprava",top:4,height:4}),new D({id:"fixedBlock1",title:"Pravidelná oprava",top:16,height:4})]}),new T({id:"column5",title:"Pracoviště 5",effectivity:.5,blocks:[]})],dragging:null}},mutations:{initColumn:function(t,e){var n=e.column;n.recalculate()},initBlock:function(t,e){var n=e.block,o=e.el;n.el=o},dragStart:function(t,e){var n=e.block;t.dragging=n,n.isDragging=!0},dragEnd:function(t,e){var n=e.block;t.dragging=null,n.isDragging=!1},dragOver:function(t,e){var n,o=e.column,r=e.y;if(t.dragging&&!t.dragging.blocked.includes(o.id)){var i=function(e,n){var o,r=e.blocks.map((function(t){return t.el})),i=Number.NEGATIVE_INFINITY,l=e.blocks.length,c=Object(d["a"])(r.entries());try{for(c.s();!(o=c.n()).done;){var a=Object(L["a"])(o.value,2),u=a[0],s=a[1],f=s.getBoundingClientRect(),b=f.top,h=b+f.height/2,g=h,p=g+f.height/2;if(n>b&&n<h)return t.dragging.el,u;if(n>g&&n<p)return s===t.dragging.el?u:u+1;var m=n-f.top-f.height/2;m<0&&m>i&&(i=m,l=u)}}catch(v){c.e(v)}finally{c.f()}return l},l=function(){var e,n=Object(d["a"])(t.columns.entries());try{for(n.s();!(e=n.n()).done;){var o,r=Object(L["a"])(e.value,2),i=r[0],l=r[1],c=Object(d["a"])(l.blocks.entries());try{for(c.s();!(o=c.n()).done;){var a=Object(L["a"])(o.value,2),u=a[0],s=a[1];if(s===t.dragging)return{columnFrom:i,blockFrom:u}}}catch(f){c.e(f)}finally{c.f()}}}catch(f){n.e(f)}finally{n.f()}},c=function(){var e,n=Object(d["a"])(t.columns.entries());try{for(n.s();!(e=n.n()).done;){var l=Object(L["a"])(e.value,2),c=l[0],a=l[1];if(a===o)return{columnTo:c,blockTo:i(o,r)}}}catch(u){n.e(u)}finally{n.f()}},a=l(),u=a.columnFrom,s=a.blockFrom,f=c(),b=f.columnTo,h=f.blockTo;u===b&&s<h&&h--,u===b&&s===h||((n=t.columns[b].blocks).splice.apply(n,[h,0].concat(Object(H["a"])(t.columns[u].blocks.splice(s,1)))),t.columns[u].recalculate(),t.columns[b].recalculate())}}}});n("ba8c");o["a"].config.productionTip=!1,new o["a"]({store:Q,render:function(t){return t(z)}}).$mount("#app")},ba8c:function(t,e,n){}});
//# sourceMappingURL=app.77c33731.js.map